<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="../../Images/Logo.png">
<title>Center 3 Dashboard</title>

<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        user-select: none;
        background-image: url('../../Images/background.png');
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
    }

    .container {
        display: flex;
        height: 100vh;
    }

    .sidebar {
        width: 240px;
        background-color: #0a5f0a;
        color: white;
        display: flex;
        flex-direction: column;
        padding: 20px 0;
        transition: width 0.3s ease, padding 0.3s ease;
    }.sidebar.collapsed {
        width: 0;
        padding: 0;
        overflow: hidden;
    }.sidebar .logo {
        text-align: center;
        margin-bottom: 40px;
    }.sidebar .logo img {
        width: 110px;
        height: 110px;
    }

    .menu {
        display: flex;
        flex-direction: column;
        gap: 25px;
        padding-left: 35px;
    }.menu-item {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 17px;
        cursor: pointer;
        opacity: 0.9;
    }.menu-item:hover {
        opacity: 1;
    }.menu-item img {
        width: 24px;
        height: 24px;
    }

    .content {
        flex: 1;
        padding: 20px 40px;
        transition: margin-left 0.3s ease;
    }

    .topbar {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-bottom: 20px;
    }

    .hamburger {
        font-size: 28px;
        cursor: pointer;
        font-weight: bold;
        color: #ffffff;
        background: #0a5f0a;
        padding: 5px 12px;
        border-radius: 6px;
    }

    .center-title {
        font-size: 26px;
        font-weight: bold;
        color: white;
        padding: 8px 18px;
        background-color: #0a5f0a;
        border-radius: 8px;
    }

    .panel {
        background: rgba(255, 255, 255, 0.92);
        padding: 30px;
        border-radius: 10px;
        width: 100%;
        box-sizing: border-box;
        border-top: 8px solid green;
    }.panel table {
        width: 100%;
        border-collapse: collapse;
        font-size: 17px;
    }

    th {
        text-align: left;
        padding-bottom: 10px;
        font-size: 16px;
    }

    .action-buttons {
        display: flex;
        gap: 10px;
    }.action-buttons button {
        width: 38px;
        height: 38px;
        border-radius: 50%;
        border: none;
        font-size: 20px;
        color: white;
        cursor: pointer;
    }

    .approve {
        background-color: #0bb53b;
    }
    .deny {
        background-color: #d93636;
    }
</style>
</head>
<body>

<div class="container">

   
    <div class="sidebar">
        <div class="logo">
            <img src="../../Images/Logo.png">
        </div>

        <div class="menu">

            <div class="menu-item" onclick="window.location.href='Center1Dashboard.html'">
                <img src="../../Images/Icon.png">
                <span>Dashboard</span>
            </div>

            <div class="menu-item" onclick="window.location.href='PatientData.html'">
                <img src="../../Images/Icon.png">
                <span>Patient Data</span>
            </div>

            <div class="menu-item" onclick="window.location.href='Profile.html'">
                <img src="../../Images/Icon.png">
                <span>Profile</span>
            </div>

            <div class="menu-item" onclick="window.location.href='../Login.html'">
                <img src="../../Images/Icon.png">
                <span>Logout</span>
            </div>

        </div>
    </div>

    
    <div class="content">
        <div class="topbar">
            <div class="hamburger">=</div>
            <div class="center-title">CENTER 3</div>
        </div>

        <div class="panel">
            <table>
                <thead>
                    <tr>
                        <th>NO.</th>
                        <th>NAME</th>
                        <th>SECTION</th>
                        <th>PURPOSE</th>
                        <th>ACTION</th>
                    </tr>
                </thead>

                <tbody id="appointmentTable"></tbody>
            </table>
        </div>
    </div>
</div>
</body>

<script>
    document.querySelector(".hamburger").addEventListener("click", () => {
        document.querySelector(".sidebar").classList.toggle("collapsed");
    });
</script>

<script>
    let appointments = JSON.parse(localStorage.getItem("appointments")) || [];
    const appointmentTable = document.getElementById("appointmentTable");

    function saveAppointments() {
        localStorage.setItem("appointments", JSON.stringify(appointments));
    }

    function renderTable() {
        appointmentTable.innerHTML = "";
        let count = 1;

        appointments
            .filter(item => item.section === "Center 3" && item.deleted !== true)
            .forEach((item) => {

                const row = document.createElement("tr");

                
                let actionCell = `
                    <div class="action-buttons">
                        <button class="approve">✔</button>
                        <button class="deny">✖</button>
                    </div>
                `;

                if (item.approved === true) {
                    actionCell = `<span style="color: green; font-weight: bold;">Accepted</span>`;
                }

                row.innerHTML = `
                    <td>${count++}</td>
                    <td>${item.fullname}</td>
                    <td>${item.section || "N/A"}</td>
                    <td>${item.purpose}</td>
                    <td>${actionCell}</td>
                `;

                
                if (!item.approved) {
                    
                    row.querySelector(".approve").addEventListener("click", () => {
                        item.approved = true;
                        saveAppointments();
                        renderTable(); 
                    });

                    
                    row.querySelector(".deny").addEventListener("click", () => {
                        item.deleted = true;
                        saveAppointments();
                        renderTable();
                    });
                }

                appointmentTable.appendChild(row);
            });
    }

    
    renderTable();
</script>
</html>
